# ThunderX Environment Configuration
# Copy this file to .env and customize for your deployment

# ============================================================================
# DEPLOYMENT MODE
# ============================================================================
# Options: standalone | distributed-manager | distributed-sensor
DEPLOYMENT_MODE=standalone

# ============================================================================
# OPENSEARCH CONFIGURATION
# ============================================================================
OPENSEARCH_VERSION=3.0.0
OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g
OPENSEARCH_INITIAL_ADMIN_PASSWORD=ThunderX@Admin123!

# Cluster settings
OPENSEARCH_CLUSTER_NAME=thunderx-cluster
OPENSEARCH_NODE_NAME=thunderx-node-01

# Network settings
OPENSEARCH_NETWORK_HOST=0.0.0.0
OPENSEARCH_HTTP_PORT=9200
OPENSEARCH_TRANSPORT_PORT=9300

# MCP Server settings
OPENSEARCH_MCP_ENABLED=true
OPENSEARCH_MCP_PORT=3000

# Data retention (days)
OPENSEARCH_RETENTION_ZEEK=30
OPENSEARCH_RETENTION_SURICATA=90
OPENSEARCH_RETENTION_ARKIME=7
OPENSEARCH_RETENTION_ALERTS=180

# ============================================================================
# ZEEK CONFIGURATION
# ============================================================================
ZEEK_INTERFACE=eth0
ZEEK_CLUSTER_ID=thunderx
ZEEK_LOG_DIR=/var/log/zeek

# ============================================================================
# SURICATA CONFIGURATION
# ============================================================================
SURICATA_INTERFACE=eth0
SURICATA_HOME_NET=192.168.0.0/16,10.0.0.0/8,172.16.0.0/12
SURICATA_EXTERNAL_NET=!$HOME_NET
SURICATA_RULE_UPDATE=enabled
SURICATA_RULE_SOURCES=et/open,tgreen/hunting

# ============================================================================
# ARKIME CONFIGURATION
# ============================================================================
ARKIME_INTERFACE=eth0
ARKIME_PCAP_DIR=/data/pcap
ARKIME_ADMIN_PASSWORD=ThunderX@Arkime123!

# ============================================================================
# WEB UI CONFIGURATION
# ============================================================================
WEB_UI_PORT=443
WEB_UI_HTTP_PORT=80
WEB_UI_SESSION_SECRET=change-me-to-random-secret-key

# ============================================================================
# API GATEWAY CONFIGURATION
# ============================================================================
API_PORT=8080
API_SECRET_KEY=change-me-to-random-api-secret
API_ALGORITHM=HS256
API_ACCESS_TOKEN_EXPIRE_MINUTES=60

# ============================================================================
# MCP AI SERVICE CONFIGURATION
# ============================================================================
MCP_AI_SERVICE_PORT=5000
MCP_AI_MODEL=gpt-4  # Or local model
MCP_AI_TEMPERATURE=0.3
MCP_AI_MAX_TOKENS=2000

# OpenAI API Key (if using OpenAI models)
# OPENAI_API_KEY=sk-...

# ============================================================================
# THREAT INTELLIGENCE CONFIGURATION
# ============================================================================
THREAT_INTEL_ENABLED=true
THREAT_INTEL_UPDATE_INTERVAL=3600  # seconds

# Feed sources (comma-separated)
THREAT_INTEL_FEEDS=threatfox,abuseipdb,et_compromised

# API Keys for threat intel sources
ABUSEIPDB_API_KEY=
VIRUSTOTAL_API_KEY=
THREATFOX_API_KEY=

# MISP Integration (optional)
MISP_ENABLED=false
MISP_URL=
MISP_API_KEY=
MISP_VERIFY_SSL=true

# ============================================================================
# ALERT MANAGER CONFIGURATION
# ============================================================================
ALERT_MANAGER_PORT=6000
ALERT_CORRELATION_ENABLED=true
ALERT_CORRELATION_WINDOW=300  # seconds

# Notification settings
ALERT_NOTIFICATIONS_ENABLED=true
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=

ALERT_SLACK_ENABLED=false
ALERT_SLACK_WEBHOOK_URL=

# ============================================================================
# DATABASE CONFIGURATION (for case management, users, etc.)
# ============================================================================
POSTGRES_VERSION=16
POSTGRES_DB=thunderx
POSTGRES_USER=thunderx
POSTGRES_PASSWORD=ThunderX@DB123!
POSTGRES_PORT=5432

# ============================================================================
# NGINX REVERSE PROXY
# ============================================================================
NGINX_VERSION=1.25-alpine

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/thunderx.crt
SSL_KEY_PATH=/etc/ssl/private/thunderx.key

# Auto-generate self-signed cert if not provided
SSL_AUTO_GENERATE=true
SSL_COUNTRY=US
SSL_STATE=State
SSL_LOCALITY=City
SSL_ORGANIZATION=ThunderX
SSL_COMMON_NAME=thunderx.local

# ============================================================================
# DISTRIBUTED MODE SETTINGS
# ============================================================================
# Manager Node
MANAGER_NODE_IP=
MANAGER_NODE_API_KEY=

# Sensor Node
SENSOR_NODE_NAME=sensor-01
SENSOR_NODE_LOCATION=datacenter-1

# ============================================================================
# RESOURCE LIMITS
# ============================================================================
# OpenSearch
OPENSEARCH_MEM_LIMIT=8g
OPENSEARCH_CPU_LIMIT=4

# Zeek
ZEEK_MEM_LIMIT=2g
ZEEK_CPU_LIMIT=2

# Suricata
SURICATA_MEM_LIMIT=2g
SURICATA_CPU_LIMIT=2

# Arkime
ARKIME_MEM_LIMIT=4g
ARKIME_CPU_LIMIT=2

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info  # debug | info | warning | error
LOG_FORMAT=json  # json | text

# ============================================================================
# MONITORING (Optional)
# ============================================================================
MONITORING_ENABLED=false
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=admin

# ============================================================================
# DEVELOPMENT / DEBUG
# ============================================================================
DEBUG_MODE=false
ENABLE_DEV_TOOLS=false

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=UTC
